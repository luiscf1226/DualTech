FROM mcr.microsoft.com/azure-sql-edge:latest

USER root

# Copy initialization scripts
COPY init-db.sql /docker-entrypoint-initdb.d/

# Create a directory for the entrypoint script
RUN mkdir -p /usr/local/bin/

# Create an entrypoint script that just runs SQL Server
RUN echo '#!/bin/bash \n\
/opt/mssql/bin/sqlservr' > /usr/local/bin/entrypoint.sh

# Make the entrypoint script executable
RUN chmod +x /usr/local/bin/entrypoint.sh

USER mssql

ENTRYPOINT ["/usr/local/bin/entrypoint.sh"] 